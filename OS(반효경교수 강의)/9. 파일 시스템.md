## Fil and File System
- File
    - A named collection of related information.
    - 일반적으로 비휘발성의 보조기억장치에 저장.
    - 운영체제는 다양한 저장 장를 file이라는 동일한 논리적 단위로 볼 수 있게 해줌.
    - operation
        - create,read,write,repostion(lseek/ 다른 부분으로 위치 수정),delete,open,close 등
- File attribute(파일의 metadata)
    - 파일 자체의 내용이 아니라 파일을 관리하기 위한 각종 정보들.
        - 파일 이름, 유형, 저장된 위치, 파일 사이즈
        - 접근 권한(읽기,쓰기,실행), 시간(생성,변경,사용), 소유자 등
- File system
    - 운영체제에서 파일을 관리하는 부분
    - 파일 및 파일의 메타데이터, 디렉토리 정보 등을 관리
    - 파일의 저장 방법 결정
    - 파일 보호 등
## Directory and Logical Disk
- Directory file
    - 파일의 메타데이터 중 일부를 보관하고 있는 일종의 특별한 파일.
    - 디렉토리에 속한 것은 파일 이름 및 파일 attribute들 등 이있다.
- Partition(=Logical Disk)
    - 하나의 (물리적)디스크 안에 여러 파티션을 두는게 일반적이다.
    - 여러 개의 물리적인 디스크를 하나의 파티션으로 구성하기도 한다.
    - (물리적)디스크를 파티션으로 구성한 뒤 각각의 파티션에 file system을 깔거나 swap area 등 다른 용도로 사용할 수 있다.
## open()
- open(a/b/c)
    - 디스크로부터 파일 c의 메타데이터를 메모리로 가지고 옴.
    - 이를 위하여 directroy path를 search 
        - root 디렉토리(루트 디렉토리의 메타데이터는 이미 os에 알려져 있음) /를 open하고 그 안에서 파일 a의 위치 획득
        - 파일 a를 오픈한 후 read하여 그 안에서 b의 위치 획득.
        - 파일 b를 
         오픈한 후 read하여 그 안에서 파일 c의 위치 획득
        - 파일 c를 오픈 
- Directroy path의 search에 너무 많은 시간 소요된다.
    - open을 read/write와 별도로 두는 이유이다.
    - 한번 open한 파일은 read/write 시 directroy search 불필요(메모리에 카피됨).
- Open file table(system wide)
    - 현재 open된 파일들의 메타데이터 보관소(in memeory)
    - 디스크의 메타데이터 보다 몇 가지 정보가 추가.
        - Open한 프로세스의 수.
        - file offset : 파일 어느 위치 접근 중인지 표시(별도 테이블 필요).
- File descriptor(file handle, file control block)
    - open file table에 대한 위치 정보(프로세스 별로)
    - 각 프로세스마다 그 프로세스가 오픈한 파일들에 대한 메타데이터 포인터를 가지고 있는 배열이 정의돼있다. 몇 번째 인덱스인지가 파일디스크립터가 돼서 인덱스를 읽어 사용자프로세스에게 리턴한다.
![](/picture/오픈.jpg)

## File Protection
- 각 파일에 대해 누구에게 어떤 유형의 접근(read/write/execution)을 허락할 것인가?
- Acess Control 방법
    - Acess control matrix
        - Access control list : 파일별로 누구에게 어떤 접근 권한이 있는지 표시
        - Capapbility : 사용자별로 자신이 접근 권한을 가진 파일 및 해당 권한 표시
    - Grouping
        - 전체 user를 owner, group, public의 세 그룹으로 구분.
        - 각 파일에 대해 세 그룹의 접근 권한(rwx)을 3bit씩으로 표시.
    - Password
        - 파일마다 password를 두는 방법(디렉토리 파일에 두는 방법도 가능)
        - 모든 접근 권한에 대해 하나의 password: all or nothing.
        - 접근 권한 별 password : 암기 문제, 관리 문제.
## File System의 Mounting


        하나의 물리적인 디스크를 partitioning을 통해 여러개의 논리적인 디스크로 나눌 수 있는데 각각 논리적인 디스크에도 파일 시스템을 설치해서 사용할 수 있다.
        다른 partition에 있는 파일 시스템에 접근할 때는 `mounting`이라는 연산을 이용한다.
        루트 파일 시스템에 특정 디렉토리 이름에다가 또 다른 파티션에 있는 파일 시스템을 mount해주고 mount된 디렉토리를 접근하게 되면 
        다른 partion에 있는 파일 시스템의 루트 디렉토리에 접근하는 것이다.
![](/picture/마운트.jpg)
## Acess Methods
- 시스템이 제공하는 파일 정보의 접근 방식       
    - 순차 접근(sequential access)
        - 카세트 테이프를 사용하는 방식처럼 순차적으로 접근
        - 읽거나 쓰면 offset은 자동적으로 증가
    - 직접 접근(direct access, random access)
        - lp 레코드 판과 같은 방식으로 접근
        - 파일을 구성하는 레코드를 임의의 순서로 접근할 수 있음.
